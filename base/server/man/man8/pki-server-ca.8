.\" First parameter, NAME, should be all caps
.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
.\" other parameters are allowed: see man(7), man(1)
.TH pki-server-ca 8 "Mar 21, 2018" "version 10.5" "PKI Instance Management Commands" Dogtag Team
.\" Please adjust this date whenever revising the man page.
.\"
.\" Some roff macros, for reference:
.\" .nh        disable hyphenation
.\" .hy        enable hyphenation
.\" .ad l      left justify
.\" .ad b      justify to both left and right margins
.\" .nf        disable filling
.\" .fi        enable filling
.\" .br        insert line break
.\" .sp <n>    insert n+1 empty lines
.\" for man page specific macros, see man(7)
.SH NAME
pki-server-ca \- Command-Line Interface for managing Certificate System CA.

.SH SYNOPSIS
.nf
\fBpki-server ca-cert-chain-export\fR -i <instance ID>
\fBpki-server ca-cert-request-find\fR -i <instance ID>
\fBpki-server ca-cert-request-show\fR -i <instance ID>
\fBpki-server ca-clone-prepare\fR -i <instance ID>
\fBpki-server ca-audit-event-find\fR -i <instance ID>
\fBpki-server ca-audit-file-find\fR -i <instance ID>
\fBpki-server ca-audit-file-verify\fR -i <instance ID>
.fi

.SH DESCRIPTION
.PP
The \fBpki-server ca\fR commands provide command-line interfaces to manage
Certificate Authority instances.  A Certificate Authority instance consists of a
single Apache Tomcat instance that contain database of certificate request and
certificates.
.PP
Operations that are available include: certificate chain export and storeing it
into pkcs12 file; certificate request find; certificate request show; certificate
backup (clone prepare); finding certificate authority audit file; verifying 
certificate authority audit file.
.PP
\fBpki-server ca\fR
.RS 4
This command is to list available ca commands.
.RE
.PP
\fBpki-server ca-cert-chain-export -i <instance ID> --pkcs12-file <p12_file> --pkcs12-password <password> --pkcs12-password-file <password_file>\fR
.RS 4
This command is to export CA certificates with chain and keys to PKCS #12 file. The output filename and either passowrd or password file is required.
.RE
.PP
\fBpki-server ca-cert-request-find -i <instance ID> --cert-file <certificate file>\fR
.RS 4
This command will list all the certificate request in the CA instance. After specifying the ceriticate file it will search for certificate request 
in the database.
It accept certificate without any BEGIN/END CERTIFICATE header/footer.
.RE
.PP
\fBpki-server ca-cert-request-show <certificate request ID> -i <instance ID>\fR
.RS 4
This command is to show the certificate request as per certificate request no. 
It shows the Request ID, Type, Status and Request (in b64 format).
.RE
.PP
\fBpki-server ca-clone-prepare -i <instance ID> --pkcs12-file <file_name.p12> --pkcs12-password <password> \fR
.RS 4
This command export all CA instance certificate to the PKCS #12 file with private keys.
.RE
.PP
\fBpki-server ca-audit-event-find -i <instance ID> --enabled True/False \fR
.RS 4
This command list all the audit events which are enabled/disabled.
.RE
.PP
\fBpki-server ca-audit-file-find -i <instance ID> \fR
.RS 4
This command find CA instance audit log file.
.RE
.PP
\fBpki-server ca-audit-file-verify -i <instance ID> \fR
.RS 4
This command will verify that audit log file is signed or not.
.RE
.PP

All pki-server commands must be executed as the system administrator.

.SH AUTHORS
Amol Kahat <akahat@redhat.com>

.SH COPYRIGHT
Copyright (c) 2018 Red Hat, Inc. This is licensed under the GNU General Public License, version 2 (GPLv2). A copy of this license is available at http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.
